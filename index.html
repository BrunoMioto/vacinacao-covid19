<!doctype html>
<html lang="pt-BR">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="//cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css">
		<link rel="stylesheet" href="//cdn.datatables.net/fixedcolumns/3.3.2/css/fixedColumns.dataTables.min.css">
		<link rel="stylesheet" href="//cdn.datatables.net/fixedheader/3.1.7/css/fixedHeader.dataTables.min.css">
		<link rel="stylesheet" href="//cdn.datatables.net/responsive/2.2.6/css/responsive.dataTables.min.css">
		<link rel="preconnect" href="//fonts.gstatic.com">
		<link rel="stylesheet" href="//fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">

		<link rel="apple-touch-icon" sizes="180x180" href="https://altendorfme.github.io/owid/meta/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="https://altendorfme.github.io/owid/meta/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="https://altendorfme.github.io/owid/meta/favicon-16x16.png">
		<link rel="manifest" href="https://altendorfme.github.io/owid/meta/site.webmanifest">
		<link rel="mask-icon" href="https://altendorfme.github.io/owid/meta/safari-pinned-tab.svg" color="#5bbad5">
		<link rel="shortcut icon" href="https://altendorfme.github.io/owid/meta/favicon.ico">
		<meta name="msapplication-TileColor" content="#1bacac">
		<meta name="msapplication-config" content="https://altendorfme.github.io/owid/meta/browserconfig.xml">
		<meta name="theme-color" content="#1bacac">

		<meta name="twitter:card" content="summary_large_image">
		<meta name="twitter:title" content="Vacinas (COVID-19) aplicadas em cada país">
		<meta name="twitter:description" content="Lista de vacinas (COVID-19) aplicadas em cada país">
		<meta name="twitter:image" content="https://altendorfme.github.io/owid/meta/social.png">

		<meta property="og:url" content="https://altendorfme.github.io/owid/">
		<meta property="og:title" content="Vacinas (COVID-19) aplicadas em cada país">
		<meta property="og:description" content="Lista de vacinas (COVID-19) aplicadas em cada país">
		<meta property="og:type" content="website">
		<meta property="og:image" content="https://altendorfme.github.io/owid/meta/social.png">
		<meta property="og:image:secure_url" content="https://altendorfme.github.io/owid/meta/social.png">
		<meta property="og:image:type" content="image/png">
		<meta property="og:image:width" content="1200">
		<meta property="og:image:height" content="630">
		<title>Vacinas (COVID-19) aplicadas em cada país</title>
		<style>
			html,
			body {
				overflow: hidden;
				background-color: #f4f4f4;
				height: 100vh;
			}
			body {
				font-family: 'Roboto', sans-serif;
				font-size: .9em;
			}
			html {
				height: -webkit-fill-available;
			}
			footer {
				font-size: .8em;
			}
			.country {
				text-overflow: ellipsis;
				max-width: 124px;
			}
			@media (min-width: 992px) {
				.country {
					max-width: 100%;
				}
			}
			
			/* Vaccines */
			.vaccines {
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
			}
			.v {
				background-color: #f4f4f4;
				color: #fff;
			}
			.v-pfizer-biontech {
				background-color: #377eb8;
			}
			.v-sputnik-v {
				background-color: #e41a1c;
			}
			.v-sinopharm {
				background-color: #4daf4a;
			}
			.v-moderna {
				background-color: #ffff33;
				color: #000;
			}
			.v-cnbg {
				background-color: #984ea3;
			}
			.v-sinovac {
				background-color: #ff7f00;
			}
			
			/* Loading */
			.loading {
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: #fff;
				z-index: 999;
			}
			.spinner {
				position: fixed;
				top: 50%;
				left: 50%;
				color: official;
				display: inline-block;
				position: relative;
				width: 80px;
				height: 80px;
				margin-top: -40px;
				margin-left: -40px;
			}
			.spinner div {
				transform-origin: 40px 40px;
				animation: lds-spinner 1.2s linear infinite;
			}
			.spinner div:after {
				content: " ";
				display: block;
				position: absolute;
				top: 3px;
				left: 37px;
				width: 6px;
				height: 18px;
				border-radius: 20%;
				background: #b0b0b0;
			}
			.spinner div:nth-child(1) {
				transform: rotate(0deg);
				animation-delay: -1.1s;
			}
			.spinner div:nth-child(2) {
				transform: rotate(30deg);
				animation-delay: -1s;
			}
			.spinner div:nth-child(3) {
				transform: rotate(60deg);
				animation-delay: -0.9s;
			}
			.spinner div:nth-child(4) {
				transform: rotate(90deg);
				animation-delay: -0.8s;
			}
			.spinner div:nth-child(5) {
				transform: rotate(120deg);
				animation-delay: -0.7s;
			}
			.spinner div:nth-child(6) {
				transform: rotate(150deg);
				animation-delay: -0.6s;
			}
			.spinner div:nth-child(7) {
				transform: rotate(180deg);
				animation-delay: -0.5s;
			}
			.spinner div:nth-child(8) {
				transform: rotate(210deg);
				animation-delay: -0.4s;
			}
			.spinner div:nth-child(9) {
				transform: rotate(240deg);
				animation-delay: -0.3s;
			}
			.spinner div:nth-child(10) {
				transform: rotate(270deg);
				animation-delay: -0.2s;
			}
			.spinner div:nth-child(11) {
				transform: rotate(300deg);
				animation-delay: -0.1s;
			}
			.spinner div:nth-child(12) {
				transform: rotate(330deg);
				animation-delay: 0s;
			}
			@keyframes lds-spinner {
				0% {
					opacity: 1;
				}
				100% {
					opacity: 0;
				}
			}
			
			/* DataTables */
			.dataTables_wrapper {
				background: #fff;
			}
			.dataTables_filter {
				margin-top: 0 !important;
				padding-top: .5rem;
				padding-bottom: .3rem;
				padding-right: .5rem;
				padding-left: .5rem;
			}
			.dataTables_filter label {
				margin-bottom: .1rem;
				align-items: center;
				display: flex;
			}
			.dataTables_filter input {
				display: block;
				width: 100%;
				padding: .375rem;
				font-size: 1rem;
				line-height: 1em;
				color: #495057;
				background-color: #fff;
				background-clip: padding-box;
				border: 1px solid #ced4da;
				border-radius: .25rem;
				transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
				margin-left: .5rem !important;
			}
			.table thead th {
				vertical-align: middle;
				border-bottom-color: #000;
			}
			table.dataTable.table-sm .sorting:after,
			table.dataTable.table-sm .sorting_asc:after,
			table.dataTable.table-sm .sorting_desc:after,
			table.dataTable.table-sm .sorting:before,
			table.dataTable.table-sm .sorting_asc:before,
			table.dataTable.table-sm .sorting_desc:before {
				top: 30% !important;
			}
			table.dataTable thead th {
				line-height: 1.2em !important;
			}
			
			.resize {
				display: flex;
				height: 100%;
				flex-direction: column;
			}
		</style>
	</head>
	<body>
		<div class="resize">
			<div class="w-100 h-100 mb-auto">
				<table id="DataTable" class="display table table-sm table-striped w-100">
					<thead>
						<tr>
							<th>Local</th>
							<th>Vacinas</th>
							<th class="text-nowrap">Última vacinação</th>
							<th class="text-nowrap">Doses aplicadas<br/>por 100 habitantes</th>
							<th class="text-nowrap">Doses aplicadas</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
			<footer class="p-2">
				Dados obtidos a partir de fontes oficiais. Apenas países que divulgaram o número de doses aplicadas.<br/>
				Última atualização: <span class="font-weight-bold timestamp"></span>
			</footer>
		</div>
		<div class="loading">
			<div class="spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
		</div>
		<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
		<script src="//cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
		<script src="//cdn.datatables.net/fixedcolumns/3.3.2/js/dataTables.fixedColumns.min.js"></script>
		<script src="//cdn.datatables.net/fixedheader/3.1.7/js/dataTables.fixedHeader.min.js"></script>
		<script src="//cdn.datatables.net/plug-ins/1.10.22/features/scrollResize/dataTables.scrollResize.min.js"></script>
		<script src="//cdn.jsdelivr.net/npm/numeral@2.0.6/numeral.min.js"></script>
		<script src="//cdn.jsdelivr.net/npm/moment@2.29.1/min/moment-with-locales.min.js"></script>
		<script>
			moment.locale('pt-br');
			numeral.register('locale', 'pt-BR', {
				delimiters: {
					thousands: '.',
					decimal: '.'
				},
				abbreviations: {
					thousand: 'k',
					million: 'm',
					billion: 'b',
					trillion: 't'
				},
				ordinal : function (number) {
					return number === 1 ? 'er' : 'ème';
				},
				currency: {
					symbol: 'R$'
				}
			});
			numeral.locale('pt-BR');

			$(document).ready( function () {
				var jqxhr = $.getJSON( "owid.json", function(data) {
					$('.timestamp').html(moment(jqxhr.getResponseHeader("Last-Modified")).format('LLL'));
				
					$.each(data,function(i, data){
						var n = i + 1;

						var vaccines = '';
						var total = numeral(data.vaccinations_total);
						
						$.each(data.vaccines,function(i, data){
							var c = data.toLowerCase().replace(' ','-').replace('/','-')
							vaccines += '<div class="p-2 d-block w-100 h-100 text-center v v-'+c+'">'+data+'</div>';
						});

						$('#DataTable > tbody').append('<tr>'+
						'<td><div class="d-flex align-items-center text-nowrap"><img class="d-inline-block mr-2" src="https://cdn.jsdelivr.net/gh/hjnilsson/country-flags/svg/'+data.iso_code.alpha2+'.svg" width="20" /><span class="country overflow-hidden">'+data.country_pt+'</span></div></td>'+
						'<td class="p-0 m-0"><div class="d-flex">'+vaccines+'</div></td>'+
						'<td class="text-center">'+moment(data.last_update_date).format('L')+'</td>'+
						'<td>'+data.total_vaccinations_per_hundred+'</td>'+
						'<td>'+total.format('0,0')+'</td>'+
						'</tr>');
					});
				})
				.done(function(data) {
					$('#DataTable').DataTable({
						paging: false,
						info: false,
						order: [[ 0, "asc" ]],
						language: {
							url: '//cdn.datatables.net/plug-ins/1.10.22/i18n/Portuguese-Brasil.json'
						},
						scrollResize: true,
						scrollY: 100,
						scrollX: true,
						scrollCollapse: true,
						fixedHeader: {
							header: true,
							footer: true
						},
						fixedColumns:   {
							leftColumns: 1,
						},
						initComplete: function( settings, json ) {
							if($('.loading').length > 0) {
								$('.loading').fadeOut(500, function() {
									$(this).remove(); 
								});
							}
						}
					});
				})
			});
		</script>
	</body>
</html>